<Window x:Class="EasyCut.ShellWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        Title="EasyCut" Height="600" Width="900"
        WindowStartupLocation="CenterScreen"
        Background="{DynamicResource MaterialDesignPaper}">
    <Grid Margin="16">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <!-- 顶部按钮 -->
        <StackPanel Orientation="Horizontal" Grid.Row="0" Margin="0,0,0,8">
            <Button Content="新建任务"
                    Command="{Binding NewTaskCommand}"
                    Style="{DynamicResource MaterialDesignRaisedButton}" />
            <Button Content="打开输出目录"
        Margin="8,0,0,0"
        Command="{Binding OpenOutputFolderCommand}"
        Style="{DynamicResource MaterialDesignFlatButton}" />

            <Button Content="刷新"
                    Margin="8,0,0,0"
                    Command="{Binding RefreshCommand}"
                    Style="{DynamicResource MaterialDesignFlatButton}" />
        </StackPanel>

        <!-- 任务列表 -->
        <DataGrid Grid.Row="1"
          ItemsSource="{Binding Tasks}"
          SelectedItem="{Binding SelectedTask}"
          AutoGenerateColumns="False"
          IsReadOnly="True">
            <DataGrid.Columns>
                <DataGridTextColumn Header="名称" Binding="{Binding Name}" Width="2*" />
                <DataGridTextColumn Header="状态" Binding="{Binding Status}" Width="*" />
                <DataGridTextColumn Header="错误信息"
                            Binding="{Binding ErrorMessage}"
                            Width="3*" />
                <!-- 当前阶段 -->
                <DataGridTextColumn Header="当前阶段"
                            Binding="{Binding PhaseDisplay}"
                            Width="2*" />
                <!-- 进度条列 -->
                <DataGridTemplateColumn Header="进度" Width="2*">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <ProgressBar Minimum="0"
                                 Maximum="100"
                                 Height="16"
                                 Value="{Binding Progress}" />
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
                <DataGridTextColumn Header="输出文件"
                    Binding="{Binding OutputFilePath}"
                    Width="2*" />
                <DataGridTextColumn Header="输出目录" Binding="{Binding OutputDirectory}" Width="2*" />
                <DataGridTextColumn Header="创建时间" Binding="{Binding CreatedTime}" Width="*" />
                <DataGridTextColumn Header="最后更新" Binding="{Binding UpdatedTime}" Width="*" />
            </DataGrid.Columns>
        </DataGrid>
    </Grid>
</Window>